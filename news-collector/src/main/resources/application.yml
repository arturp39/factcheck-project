server:
  port: ${SERVER_PORT:8081}
  forward-headers-strategy: framework
spring:
  datasource:
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    driver-class-name: org.postgresql.Driver
    hikari.maximum-pool-size: 2
    hikari.minimum-idle: 0
  flyway:
    enabled: true
    locations: classpath:db/migration
    table: flyway_schema_history_collector
    schemas: content

  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate.jdbc.time_zone: UTC

  sql:
    init:
      mode: never

weaviate:
  base-url: ${WEAVIATE_BASE_URL}

management:
  endpoints:
    web:
      base-path: /actuator
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      show-details: when_authorized
  metrics:
    tags:
      application: factcheck-news-collector

nlp-service:
  url: ${NLP_SERVICE_URL:http://localhost:8000}

ingestion:
  max-parallel-sources: 1
  interval-ms: 600000
  run-timeout: PT6H
  block-threshold: 2
  block-duration: PT24H
  task-lease-seconds: 1800

crawler:
  user-agent: FactCheckCollector/1.0 (+https://example.com)

search:
  embedding-dimension: 768

newsapi:
  api-key: ${NEWSAPI_API_KEY:}
  base-url: https://newsapi.org/v2
  max-sources-per-request: 20
  max-pages-per-batch: 5
  max-requests-per-ingestion: 100
  sort-by: publishedAt

cloud-tasks:
  project-id: ${GCP_PROJECT:}
  location: ${CLOUD_TASKS_LOCATION:}
  queue: ${CLOUD_TASKS_QUEUE:}
  target-url: ${CLOUD_TASKS_TARGET_URL:http://localhost:8081/ingestion/task}
  service-account-email: ${CLOUD_TASKS_SERVICE_ACCOUNT_EMAIL:}
  access-token: ${CLOUD_TASKS_ACCESS_TOKEN:}

chunking:
  use-semantic: true
  similarity-threshold: 0.65
  min-sentences: 2
  max-sentences: 8
  max-tokens: 400
  overlap-sentences: 1
  semantic-min-sentences: 10