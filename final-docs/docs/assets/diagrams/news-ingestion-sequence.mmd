sequenceDiagram
  participant SCH as Cloud Scheduler
  participant COL as Collector
  participant TASKS as Cloud Tasks
  participant NEWS as NewsAPI/RSS
  participant MBFC as MBFC API
  participant NLP as NLP Service
  participant W as Weaviate
  participant DB as Collector DB
  participant ADMIN as Admin

  ADMIN->>COL: POST /admin/mbfc/sync
  COL->>MBFC: fetch bias metadata
  MBFC-->>COL: bias data
  COL->>DB: update mbfc_sources + publishers

  SCH->>COL: POST /ingestion/run
  COL->>DB: create ingestion_run (cid)
  COL->>TASKS: enqueue tasks per source

  loop each source endpoint
    TASKS->>COL: POST /ingestion/task
    COL->>NEWS: fetch articles
    NEWS-->>COL: raw articles
    COL->>NLP: preprocess + embed (cid)
    NLP-->>COL: embeddings
    COL->>W: index chunks
    W-->>COL: ack
    COL->>DB: update articles + ingestion_logs
  end
