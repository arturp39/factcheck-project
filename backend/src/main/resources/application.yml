server:
  port: ${SERVER_PORT:8080}

spring:
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5433/factcheck_backend}
    username: ${SPRING_DATASOURCE_USERNAME:factcheck_backend}
    password: ${SPRING_DATASOURCE_PASSWORD:factcheck_backend}
    driver-class-name: org.postgresql.Driver

  flyway:
    enabled: true
    locations: classpath:db/migration
    table: flyway_schema_history_backend

  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate.jdbc.time_zone: UTC
      hibernate:
        format_sql: true

    show-sql: false

  sql:
    init:
      mode: never

# Vertex AI settings
vertex:
  project-id: ${VERTEX_PROJECT_ID}
  location: ${VERTEX_LOCATION:us-central1}
  model-name: ${VERTEX_MODEL_NAME:gemini-2.5-flash}
  credentials-path: ${VERTEX_CREDENTIALS_PATH:}

# Weaviate cfg
weaviate:
  base-url: ${WEAVIATE_BASE_URL:http://localhost:8082}
  api-key: ${WEAVIATE_API_KEY:}
  max-distance: 0.5

logging:
  level:
    root: INFO
    com.factcheck.backend: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} %-5level [%X{corrId}] %logger{36} - %msg%n"

nlp-service:
  url: ${NLP_SERVICE_URL:http://localhost:8000}
  auth:
    enabled: ${NLP_SERVICE_AUTH_ENABLED:false}
    audience: ${NLP_SERVICE_AUTH_AUDIENCE:}

app:
  claim:
    max-length: 400
  search:
    top-k: 5
  restclient:
    connect-timeout-ms: 3000
    read-timeout-ms: 30000
  security:
    admin-name: ${APP_ADMIN_NAME:admin}
    admin-password: ${APP_ADMIN_PASSWORD:admin}
    jwt-secret: ${APP_JWT_SECRET}
    jwt-issuer: ${APP_JWT_ISSUER:factcheck-backend}
    jwt-ttl-minutes: ${APP_JWT_TTL_MINUTES:120}
    jwt-cookie-name: ${APP_JWT_COOKIE_NAME:factcheck_token}
    jwt-cookie-secure: ${APP_JWT_COOKIE_SECURE:false}
    jwt-cookie-same-site: ${APP_JWT_COOKIE_SAME_SITE:Strict}

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: when_authorized
